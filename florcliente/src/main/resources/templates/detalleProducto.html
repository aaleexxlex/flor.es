<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/head :: head}">
    <style>
        .imagen-producto {
            width: 100%;
            max-width: 300px;
            height: auto;
            object-fit: cover;
        }

        .tag-size {
            border: 1px solid #ccc;
            padding: 5px 10px;
            margin: 5px;
            border-radius: 5px;
            cursor: pointer;
        }

        .tag-size.active {
            background-color: #f06292;
            color: white;
        }
    </style>
</head>
<body>

<!-- NAVBAR -->
<header th:replace="~{fragments/navbar :: navbar}"></header>

<div class="container-fluid px-5 my-5">
  <div class="row">

    <!-- Columna izquierda: Imagen -->
    <div class="col-md-4 d-flex justify-content-center align-items-start">
      <img th:src="@{${producto.imagen}}" th:alt="'Imagen de ' + ${producto.nombre}" class="img-fluid rounded imagen-producto" />
    </div>

    <!-- Columna central: Detalles -->
    <div class="col-md-4">
      <h4 class="text-center" th:text="${producto.nombre}">Nombre</h4>
      <p class="text-center" th:text="'Floricultor: ' + ${producto.floricultor.nombre}">Floricultor</p>
      <div class="text-warning text-center">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ <span class="text-muted">(8 Reviews)</span></div>
      <p class="info-verde mt-2 text-center">‚óè En stock</p>

      <div class="border p-3 rounded my-3 bg-light">
        <strong>Gana un 5% de descuento por hacerte miembro</strong><br/>
        <small>¬øNo eres miembro? <a href="/registro">Reg√≠strate</a></small>
      </div>

      <p>Un hermoso ramo de <span th:text="${producto.tipoFlor}">flores</span> frescas, seleccionadas a mano y enviadas directamente desde el floricultor local. Perfecto para regalar o decorar.</p>

      <ul>
        <li>Flores frescas de alta calidad</li>
        <li>Env√≠o r√°pido el mismo d√≠a</li>
        <li>Presentaci√≥n elegante con envoltura premium</li>
        <li>Ramos hechos por floristas expertos</li>
        <li>Apoya a floricultores locales</li>
        <li>Compra 100% segura</li>
      </ul>

      <p class="text-muted mt-4">
        <strong>Floricultor:</strong> <span th:text="${producto.floricultor.nombre}">Nombre</span><br>
        <strong>Categor√≠a:</strong> <span th:text="${producto.tipoFlor}">Categor√≠a</span>
      </p>
    </div>

    <!-- Columna derecha: caja compra -->
    <div class="col-md-4">
      <div class="sidebar-compra">
        <div class="precio mb-2" th:text="${producto.precio} + ' ‚Ç¨'">3 ‚Ç¨</div>  
        <img src="/images/visa_mastercard.png" alt="M√©todos de pago" class="mb-3" style="max-width: 100px;">


        <!-- Tama√±os -->
        <label class="form-label">Tama√±o:</label>
        <div class="d-flex flex-wrap mb-3">
          <div class="tag-size active" data-cantidad="1">1 flor</div>
          <div class="tag-size" data-cantidad="6">6 flores</div>
          <div class="tag-size" data-cantidad="12">12 flores</div>
          <div class="tag-size" data-cantidad="24">24 flores</div>
        </div>

        <!-- Cantidad -->
        <label class="form-label">Cantidad</label>
        <div class="input-group mb-3" style="width: 120px;">
          <button class="btn btn-outline-secondary" id="restar">-</button>
          <input type="number" class="form-control text-center" value="1" min="1" id="cantidad">
          <button class="btn btn-outline-secondary" id="sumar">+</button>
        </div>

        <!-- Bot√≥n -->
        <button class="btn btn-principal w-100">A√±adir al carrito</button>

        <!-- Env√≠o -->
        <p class="mt-3 text-muted small">
          üì¶ Enviado desde Madrid, <span th:text="${producto.floricultor.nombre}">Floricultor</span>
        </p>
      </div>
    </div>

  </div>
</div>

<!-- FOOTER -->
<footer th:replace="~{fragments/footer :: footer}"></footer>

<!-- Script para sumar/restar y seleccionar tama√±o -->
<script>
  const btnSumar = document.getElementById('sumar');
  const btnRestar = document.getElementById('restar');
  const inputCantidad = document.getElementById('cantidad');
  const sizeButtons = document.querySelectorAll('.tag-size');

  btnSumar.addEventListener('click', () => {
    inputCantidad.value = parseInt(inputCantidad.value) + 1;
  });

  btnRestar.addEventListener('click', () => {
    const actual = parseInt(inputCantidad.value);
    if (actual > 1) {
      inputCantidad.value = actual - 1;
    }
  });

  sizeButtons.forEach(btn => {
    btn.addEventListener('click', () => {
      // Quitar clase active a todos
      sizeButtons.forEach(b => b.classList.remove('active'));
      // A√±adir clase active al clicado
      btn.classList.add('active');
      // Cambiar el valor del input cantidad
      const cantidad = btn.getAttribute('data-cantidad');
      inputCantidad.value = cantidad;
    });
  });
</script>

</body>
</html>
