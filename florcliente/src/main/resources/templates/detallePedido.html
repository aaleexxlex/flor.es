<!DOCTYPE html>
<html lang="es" xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments/head :: head"></head>
<body>

<header th:replace="fragments/navbar :: navbar"></header>

<div class="container py-5">
  <h2 class="mb-4">Detalle del pedido</h2>

  <div th:if="${pedido != null}">
    <p><strong>ID del pedido:</strong> <span th:text="${pedido.idPedido}"></span></p>
    <p><strong>Fecha:</strong> <span th:text="${pedido.fecha}"></span></p>
    <p><strong>Cliente:</strong> <span th:text="${pedido.cliente.nombre}"></span></p>
    <p><strong>Estado:</strong> <span th:text="${pedido.estado}"></span></p>

    <h4 class="mt-4">Productos en el pedido:</h4>
    <ul class="list-group">
        <li class="list-group-item d-flex align-items-center" th:each="linea : ${pedido.lineasPedido}">
          
          <!-- Imagen del producto -->
          <img th:src="${linea.producto.imagen}" th:alt="${linea.producto.nombre}"
               class="rounded me-3" style="width: 80px; height: 80px; object-fit: cover;" />
      
          <!-- Info del producto -->
          <div>
            <p class="mb-1 fw-semibold" th:text="${linea.producto.nombre}">Nombre del producto</p>
            <small>
              Cantidad: <span th:text="${linea.cantidad}"></span> |
              Precio unidad: <span th:text="${linea.producto.precio} + ' €'"></span>
            </small>
          </div>
      
        </li>
      </ul>

    <p class="mt-3"><strong>Total:</strong> <span th:text="${pedido.total} + ' €'"></span></p>
  </div>

  <div th:if="${pedido == null}">
    <p class="text-danger">No se pudo cargar el pedido.</p>
  </div>

  <a href="/cuenta" class="btn mt-4" style="background-color: #D72684; color: white;">Volver</a>
</div>

<footer th:replace="fragments/footer :: footer"></footer>
</body>
</html>
